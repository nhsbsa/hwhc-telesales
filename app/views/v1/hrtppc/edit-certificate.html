{% extends 'layout-fullscreen.html' %}

{% set pageName = 'Edit certificate details' %}

{% block beforeContent %}
 {{ backLink({
    href: 'javascript:history.go(-1)',
    text: 'Back'
  }) }}
{% endblock %}

{% block content %}

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    <h1 class="nhsuk-heading-l">{{ pageName }}</h1>
  </div>
</div>


<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    {% if canEditCertificateStart %}
    {% set certificateStart %}
      {{ dateInput({
        id: "certificate-start",
        hint: {
          text: "Start date can only be changed up to 30 days after application date."
        },
        items: [
          { 
            name: "day", 
            classes: "nhsuk-input--width-2", 
            value: "25" 
          },
          { 
            name: "month", 
            classes: "nhsuk-input--width-2", 
            value: "11" 
          },
          { 
            name: "year", 
            classes: "nhsuk-input--width-4", 
            value: "2025" 
          }
        ]
      }) }}
      {% endset %}
      {% else %}
        {% set certificateStart %}
        <p class="nhsuk-hint">
          Start date can only be changed up to 30 days after application date.
        </p>
            {{ formattedApplicationDate }}
        {% endset %}
      {% endif %}



    {{ summaryList({
      heading: "Certificate details",
      headingLevel: "2",
      headingClasses: "nhsuk-heading-s",
        classes: "summary-list--single-line",
        rows: [
          {
            key: { 
              text: "Certificate reference" 
            },
            value: 
            { 
              text: "HRT AF4A 488E" 
            }
          },
          {
            key: { 
              text: "Certificate type" 
            },
            value: {
              html: tag({ 
                text: "HRT PPC", 
                classes: "nhsuk-tag--blue" 
              })
            }
          },
          {
            key: { 
              text: "Certificate status" 
            },
            value: {
               html: "ACTIVE" 
              }
          },
          {
            key: { 
              text: "Certificate channel" 
            },
            value: {
              html: "Online" 
            }
          },
          {
            key: { 
              text: "Certificate fulfilment" 
            },
            value: {
              classes: "fulfilment-value",
              html: radios({
                idPrefix: "example-inline",
                name: "exampleInline",
                classes: "nhsuk-radios--inline summary-list-radios",
                items: [
                  { 
                    value: "email", 
                    text: "Email (L)",
                    checked: true
                  },
                  { 
                    value: "post", 
                    text: "Post (N)" 
                  }
                ]
              })
            }
          },
          {
            key: { 
              text: "Certificate start" 
            },
            value: { 
              html: certificateStart
            }
          },
          {
            key: { 
              text: "Certificate expiry" 
            },
            value: { 
              html: "24 November 2026" 
            }
          },
          {
            key: { 
              text: "Application date" 
            },
            value: { 
              html: "25 November 2025" 
            }
          }
        ]
    }) }}

    <div class="nhsuk-button-group">
      {{ button
        ({ 
          text: 'Submit (I)',
          href: "case"
        })
      }}
      {{ button
        ({ classes: "nhsuk-button--secondary", 
          text: 'Cancel (M)',
          href: "../search"
        }) 
      }}
    </div>

  </div>
</div>

<style>

  .summary-list--single-line .nhsuk-summary-list__row {
    display: flex;
    flex-wrap: nowrap;
    align-items: flex-start;
  }

  /* --------------------------------------------------- */
  /* STACKING BREAKPOINT 1 — small screens (≤425px)      */
  /* --------------------------------------------------- */
  @media (max-width: 425px) {

    .summary-list--single-line .nhsuk-summary-list__row {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.25rem;
      padding-bottom: 0.5rem;
    }

    .summary-list--single-line .nhsuk-summary-list__key {
      margin: 0;
    }

  }


  .summary-list-radios {
    display: flex;
    white-space: nowrap;
  }

  .fulfilment-value {
    display: flex;
    align-items: center;
  }

</style>



{% endblock %}